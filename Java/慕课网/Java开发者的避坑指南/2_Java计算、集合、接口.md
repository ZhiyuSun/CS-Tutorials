## Java计算、集合、接口

### 1.  总是用不好数值计算、日期计算该怎么办？

用于精确计算的类BigDecimal

- BigDecimal核心是精度，精度如果不匹配，结果大概率不会符合预期
  - scale 需要与小数位匹配
  - 做除法时出现除不尽的情况，需要制定精度
  - 精度问题导致比较结果与预期的不一致
    - equals会比较精度，返回false
    - compareTo不会返回异常

SimpleDateFormat使用上常见的坑

- SimpleDateFormat可以解析大于/等于它定义的时间精度，但是不能解析小于它定义的时间精度
- 它是线程不安全的，在多线程环境下操作，会抛出异常
  - 定义为局部变量
  - 使用ThreadLocal
  - 使用synchronizez

### 2. for循环，沾上集合出大问题

传统的for循环是怎样的？

- 如果是数组：通过数组长度，建立索引
- 如果是集合：迭代器

传统的for循环存在怎样的弊端与劣势呢？

- 我需要的是可迭代对象中的元素，并不需要元素的索引
- 在嵌套环境下（多个可迭代对象），需要小心迭代器对象的正确性

foreach优于for

- 只专注于迭代对象自身，而不考虑多余的索引
  - 不会降低性能
- 任何实现Iterable接口的对象，都可以使用for-each循环处理
- 进一步扩展：Java8 Iterable.forEach在一些场景下会比for-each更加方便

### 3. 如果不好好判等，集合存储就会乱套

Object的equals和hashcode方法

- 
- set和map是根据hashcode是否是一样的。如果要在set和map是同一个，需要重写hashcode方法

集合中元素的索引也与equlas相关

- 类实现了compareTo方法，就需要实现equals方法
- compareTo与equals的实现过程需要同步
  - indexOf是基于equals方法实现的比较
  - Collection.binarySearch是基于compareTo方法
  - compareTo是判断元素在排序中的位置，equals是判断元素是否相等

### 4. lombok常用注解

- lombok要避免单字母驼峰的命名方式，比如iPhone
- 存在集成的情况下，子类只会比较自己的属性，要加@EqualandHashCode（super=True），才能加上父类的属性比较

### 5. 怎么避免抽象类和接口选择失误呢？

抽象类、接口的含义和特性

- 抽象类是子类的通用特性，包含了属性和行为；接口是定义行为，并不关心谁去实现
- 抽象类是对类本质的抽象，表达的是is a的关系；接口是对行为的抽象，表达的是like a的关系

抽象类、接口的相同点

- 接口中的方法（java8改变了这一语法）和抽象类中的抽象方法都不能有方法体，并且必须在子类中实现。
- 都可以被继承，但是不能被实例化。

抽象类、接口的不同点

- 使用时语法不通，抽象类使用extends，接口则使用implements
- 接口中只能定义常量，所以，不能表达对象状态，而抽象类可以
- 接口中的方法必须是public类型的，而抽象类则没有限制
- 类可以同时实现多个接口（间接解决了Java不支持多继承的we难题），但是只能继承一个抽象类。

### 6. 为什么接口的默认方法和静态方法改写总不合预期

静态方法和默认方法，好难

### 7. 函数式接口和lambda表达式

太难理解了

stream操作分类，中间操作，结束操作







### tips

- 集合可以用可迭代对象
- 